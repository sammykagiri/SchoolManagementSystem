{% extends 'base.html' %}

{% block title %}Delete Fee Category | School Management System{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header bg-danger text-white">
                    <h4 class="mb-0">
                        <i class="fas fa-exclamation-triangle me-2"></i>Delete Fee Category
                    </h4>
                </div>
                <div class="card-body">
                    {% if category.category_type == 'transport' %}
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Note:</strong> Transport fees are now managed via transport routes. Any fee structures associated with this transport category will be automatically deleted. However, if this category is used in student fees, you must update or remove those fees first.
                    </div>
                    {% else %}
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Warning:</strong> This action cannot be undone. Make sure this fee category is not being used in any fee structures or student fees.
                    </div>
                    {% endif %}
                    
                    <p>Are you sure you want to delete the following fee category?</p>
                    
                    <div class="card bg-light mb-3">
                        <div class="card-body">
                            <h5>{{ category.name }}</h5>
                            <p class="mb-1"><strong>Type:</strong> {{ category.get_category_type_display }}</p>
                            {% if category.description %}
                            <p class="mb-1"><strong>Description:</strong> {{ category.description }}</p>
                            {% endif %}
                            <p class="mb-0"><strong>Optional:</strong> {% if category.is_optional %}Yes{% else %}No{% endif %}</p>
                        </div>
                    </div>
                    
                    {% if category.category_type == 'transport' %}
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Important:</strong> After deleting this transport category, make sure transport fees are being generated correctly via the transport routes system.
                    </div>
                    {% endif %}
                    
                    <form method="post">
                        {% csrf_token %}
                        <div class="d-flex justify-content-end gap-2">
                            <a href="{% url 'core:fee_category_list' %}" class="btn btn-secondary">
                                <i class="fas fa-times me-2"></i>Cancel
                            </a>
                            <button type="submit" class="btn btn-danger">
                                <i class="fas fa-trash me-2"></i>Delete Category
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}




